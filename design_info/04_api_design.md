# API è¨­è¨ˆæ›¸

## ğŸ“˜ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå

é£Ÿæç”»åƒã‹ã‚‰ãƒ¬ã‚·ãƒ”ææ¡ˆã‚¢ãƒ—ãƒª

---

## 1. ä½¿ç”¨æŠ€è¡“

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**ï¼šFastAPI
- **AI API**ï¼šOpenAI APIï¼ˆGPT-4o-mini / DALLÂ·Eï¼‰
- **DB**ï¼šSQLiteï¼ˆãƒ¬ã‚·ãƒ”ä¿å­˜ç”¨ï¼‰
- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼**ï¼šJSON

---

## 2. ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

| No  | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ           | ãƒ¡ã‚½ãƒƒãƒ‰ | æ©Ÿèƒ½æ¦‚è¦                                     |
| --- | ------------------------ | -------- | -------------------------------------------- |
| 1   | `/upload`                | POST     | é£Ÿæç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã€é£Ÿææ¤œå‡ºå‡¦ç†ã‚’è¡Œã† |
| 2   | `/ingredients`           | GET      | æ¤œå‡ºã•ã‚ŒãŸé£Ÿæãƒªã‚¹ãƒˆã‚’å–å¾—                   |
| 3   | `/recipes`               | POST     | é£Ÿæãƒªã‚¹ãƒˆã‚’ã‚‚ã¨ã«ãƒ¬ã‚·ãƒ”ã‚’ç”Ÿæˆ               |
| 4   | `/recipes`               | GET      | ä¿å­˜æ¸ˆã¿ãƒ¬ã‚·ãƒ”ä¸€è¦§ã‚’å–å¾—                     |
| 5   | `/recipes/{id}`          | GET      | æŒ‡å®šã—ãŸãƒ¬ã‚·ãƒ”ã®è©³ç´°ã‚’å–å¾—                   |
| 6   | `/recipes/{id}`          | DELETE   | æŒ‡å®šã—ãŸãƒ¬ã‚·ãƒ”ã‚’å‰Šé™¤                         |
| 7   | `/recipes/{id}`          | PUT      | æŒ‡å®šã—ãŸãƒ¬ã‚·ãƒ”ã‚’æ›´æ–°                         |
| 8   | `/recipes/{id}/favorite` | POST     | æŒ‡å®šã—ãŸãƒ¬ã‚·ãƒ”ã‚’ãŠæ°—ã«å…¥ã‚Šç™»éŒ²/è§£é™¤          |
| 9   | `/recipes/{id}/image`    | POST     | æŒ‡å®šã—ãŸãƒ¬ã‚·ãƒ”ã®å®Œæˆå“ã‚¤ãƒ¡ãƒ¼ã‚¸ç”»åƒã‚’ç”Ÿæˆ     |

---

## 3. ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä»•æ§˜

### 3.1 `/upload` (POST)

- **æ¦‚è¦**ï¼šç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã€ã‚µãƒ¼ãƒãƒ¼ã§é£Ÿææ¤œå‡ºã‚’å®Ÿè¡Œ
- **ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**

  ```http
  POST /upload
  Content-Type: multipart/form-data

  file: (jpg/pngç”»åƒ)

  ```

- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹**
  ```json
  {
    "ingredients": ["tomato", "onion", "chicken"]
  }
  ```

### 3.2`/ingredients`(GET)

- **æ¦‚è¦**:ç›´å‰ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸç”»åƒã‹ã‚‰æ¤œå‡ºã•ã‚ŒãŸé£Ÿæã‚’å–å¾—
- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹**
  ```json
  {
    "ingredients": ["tomato", "onion", "chicken"]
  }
  ```

### 3.3`/recipes`(POST)

- **æ¦‚è¦**:é£Ÿæãƒªã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãƒ¬ã‚·ãƒ”ã‚’ç”Ÿæˆ
- **ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**
  ```json
  {
    "ingredients": ["tomato", "onion", "chicken"]
  }
  ```
- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹**
  ```json
  {
    "recipes": [
      {
        "title": "ãƒˆãƒãƒˆãƒã‚­ãƒ³ã‚«ãƒ¬ãƒ¼",
        "ingredients": ["tomato", "onion", "chicken", "curry powder"],
        "steps": [
          "ç‰ã­ãã‚’ç‚’ã‚ã‚‹",
          "é¶è‚‰ã‚’åŠ ãˆã‚‹",
          "ãƒˆãƒãƒˆã¨ã‚¹ãƒ‘ã‚¤ã‚¹ã‚’å…¥ã‚Œã‚‹",
          "ç…®è¾¼ã‚€"
        ],
        "image_url": "/static/generated/recipe1.png"
      }
    ]
  }
  ```

### 3.4`/recipes`(GET)

- **æ¦‚è¦**:ä¿å­˜æ¸ˆã¿ãƒ¬ã‚·ãƒ”ä¸€è¦§ã‚’å–å¾—
- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
  ```json
  {
    "recipes": [
      {
        "id": 1,
        "title": "ãƒˆãƒãƒˆãƒã‚­ãƒ³ã‚«ãƒ¬ãƒ¼",
        "created_at": "2025-09-15",
        "favorite": true
      },
      {
        "id": 2,
        "title": "ã‚ªãƒ‹ã‚ªãƒ³ã‚¹ãƒ¼ãƒ—",
        "created_at": "2025-09-14",
        "favorite": false
      }
    ]
  }
  ```

### 3.5`/recipes/{id}`(GET)

- **æ¦‚è¦**:ä¿å­˜æ¸ˆã¿ãƒ¬ã‚·ãƒ”ã®è©³ç´°ã‚’å–å¾—
- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹**
  ```json
  {
    "id": 1,
    "title": "ãƒˆãƒãƒˆãƒã‚­ãƒ³ã‚«ãƒ¬ãƒ¼",
    "ingredients": ["tomato", "onion", "chicken", "curry powder"],
    "steps": [
      "ç‰ã­ãã‚’ç‚’ã‚ã‚‹",
      "é¶è‚‰ã‚’åŠ ãˆã‚‹",
      "ãƒˆãƒãƒˆã¨ã‚¹ãƒ‘ã‚¤ã‚¹ã‚’å…¥ã‚Œã‚‹",
      "ç…®è¾¼ã‚€"
    ],
    "image_url": "/static/generated/recipe1.png",
    "favorite": true,
    "tags": ["ã‚«ãƒ¬ãƒ¼", "ç°¡å˜"]
  }
  ```

### 3.6`/recipes/{id}`(DELETE)

- **æ¦‚è¦**:ä¿å­˜æ¸ˆã¿ãƒ¬ã‚·ãƒ”ã‚’å‰Šé™¤
- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹**
  ```json
  {
    "status": "success",
    "message": "Recipe deleted"
  }
  ```

### 3.7`/recipes/{id}`(PUT)

- **æ¦‚è¦**:ä¿å­˜æ¸ˆã¿ãƒ¬ã‚·ãƒ”ã‚’æ›´æ–°ï¼ˆææ–™ã‚„æ‰‹é †ã‚’ç·¨é›†å¯èƒ½ï¼‰
- **ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**
  ```json
  {
    "title": "æ”¹è‰¯ç‰ˆãƒˆãƒãƒˆãƒã‚­ãƒ³ã‚«ãƒ¬ãƒ¼",
    "ingredients": ["tomato", "onion", "chicken", "garlic"],
    "steps": ["ææ–™ã‚’æº–å‚™ã™ã‚‹", "ç‚’ã‚ã‚‹", "ç…®è¾¼ã‚€"]
  }
  ```

### 3.8`/recipes/{id}/favorite`(POST)

- **æ¦‚è¦**:ãƒ¬ã‚·ãƒ”ã‚’ãŠæ°—ã«å…¥ã‚Šç™»éŒ²/è§£é™¤
- **ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**
  ```json
  {
    "favorite": true
  }
  ```
- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹**
  ```json
  {
    "status": "success",
    "message": "Recipe marked as favorite"
  }
  ```

### 3.9`/recipes/{id}/image(POST)

- **æ¦‚è¦**:ãƒ¬ã‚·ãƒ”ã‚’ã‚‚ã¨ã«å®Œæˆå“ã‚¤ãƒ¡ãƒ¼ã‚¸ç”»åƒã‚’ç”Ÿæˆï¼ˆDALL-E API åˆ©ç”¨ï¼‰
- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹**
  ```json
  {
    "status": "success",
    "image_url": "/static/generated/recipe1.png"
  }
  ```
