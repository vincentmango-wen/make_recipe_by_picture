# 要件定義書

## 📘 プロジェクト名

食材画像からレシピ提案アプリ

---

## 1. 背景

日々の献立に悩むユーザーや、冷蔵庫の余り食材を有効活用したい人が多い。  
食材の写真を撮るだけで自動的にレシピ提案できるアプリは、料理初心者や忙しい人にとって有用。

---

## 2. 目的

- 食材の画像をアップロードするだけで、食材名を自動検出する。
- 検出した食材をもとに LLM（OpenAI API）を利用しておすすめレシピを生成する。
- 生成（またはユーザーが編集）したレシピを保存・再利用できるようにする。
- レシピの完成イメージを画像として生成し、視覚的にわかりやすく提示する。
- ユーザーが「今日何を作るか」を素早く決定できるように支援する。

---

## 3. 対象ユーザー

- 料理初心者
- 献立に悩んでいる主婦・社会人
- 冷蔵庫の余り物を使い切りたい人

---

## 4. 機能要件（Functional Requirements）

1. **画像アップロード機能**

   - ユーザーはスマホや PC から食材画像をアップロードできる。

2. **食材検出機能**

   - アップロード画像を解析し、写っている食材をリスト化する。
   - 検出結果はユーザーに確認可能。

3. **レシピ生成機能**

   - 食材リストを入力として LLM に渡し、複数のレシピを生成する。
   - レシピ内容には「料理名」「材料」「手順」を含む。

4. **結果表示機能**

   - 食材リストとレシピを画面に表示する。
   - レシピはカード/リスト形式で閲覧可能。

5. **レシピ保存機能**

   - 生成/編集したレシピをローカル DB に保存できる。
   - 保存項目（最低限）：`id`, `title`, `ingredients`, `steps`, `created_at`, `updated_at`, `source`, `tags`。
   - 保存済みレシピの一覧表示・検索（タイトル/タグ/食材でフィルタ）。
   - 個別閲覧・編集・削除。
   - お気に入り（スター）フラグの付与/解除。
   - 初期はユーザー認証なし。将来的にマルチユーザー化に備えて `user_id` カラム追加を想定。
   - 初期実装 DB は SQLite を利用。

6. **完成品イメージ画像生成機能（追加）**
   - 生成したレシピに基づいて、完成品の料理イメージを自動生成する。
   - 画像生成 API（例：OpenAI DALL·E）を利用。
   - 生成画像は結果画面と一緒に表示。
   - 保存済みレシピに画像のパス（URL/ファイル名）を紐付け可能。

---

## 5. 非機能要件（Non-Functional Requirements）

- **操作性**：初心者でも直感的に利用できるシンプルな UI。
- **応答時間**：レシピ生成は 10 秒以内を目標。
- **拡張性**：将来的にユーザー認証やレコメンド機能などを追加可能。
- **セキュリティ/プライバシー**：アップロード画像は処理後に一時ファイルを削除。DB はローカル保存で外部公開しない。
- **信頼性**：保存時のバリデーション（タイトル必須、材料/手順の最小文字数等）と例外処理。
- **バックアップ**：SQLite ファイルの定期バックアップ手順（README に記載）。

---

## 6. 使用技術

- **バックエンド**：FastAPI
- **AI モデル**：OpenAI API（GPT-4o-mini など）
- **画像処理**：PIL または torchvision
- **画像生成**：OpenAI DALL·E API
- **言語**：Python
- **データ保存**：SQLite（将来：PostgreSQL などへ拡張可能）
- **OR マッパー（任意）**：SQLModel または SQLAlchemy（初心者向けに SQLModel を推奨）

---

## 7. 想定する入出力

- **入力（ユーザー側）**：
  - 食材画像（jpg, png）
  - レシピ保存時の任意タグ・お気に入りフラグ
- **出力（アプリ側）**：
  - 食材リスト（JSON 形式）
  - レシピ提案（料理名・材料・手順を含むテキスト）
  - 完成品イメージ画像（jpg, png）
  - 保存済みレシピ一覧・詳細・検索結果

---

## 8. 開発体制

- 開発者：1 名（プログラミング学習歴 1 年程度）

---

## 推奨保存名称

`02_requirements_definition.md`
