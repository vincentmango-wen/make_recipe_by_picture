# テスト計画書

## 📘 プロジェクト名

食材画像からレシピ提案アプリ

---

## 1. テスト目的

本アプリの主要機能（画像アップロード、食材検出、レシピ生成・保存・表示・削除、完成品イメージ生成）が正しく動作することを確認し、ユーザーにとって安定して使える状態を保証する。

---

## 2. テスト対象範囲

- バックエンド API（FastAPI）
- フロントエンド UI（基本的な画面遷移）
- DB（SQLite）の保存・検索機能
- OpenAI API との連携部分

---

## 3. テスト項目一覧

### 3.1 画像アップロード機能

- [ ] 正常に jpg/png 画像をアップロードできるか
- [ ] 非対応の形式（例: .txt, .pdf）をアップロードした際にエラーが返るか
- [ ] 画像サイズが大きすぎる場合にエラーが返るか

### 3.2 食材検出機能

- [ ] アップロード画像から正しく食材が抽出されるか
- [ ] 食材が検出できなかった場合にエラーメッセージが表示されるか
- [ ] ユーザーが食材リストを編集できるか（追加・削除）

### 3.3 レシピ生成機能

- [ ] 食材リストを入力した場合にレシピが返ってくるか
- [ ] 複数のレシピが生成されるか
- [ ] レシピに料理名・材料・手順が含まれているか
- [ ] 応答が 10 秒以内に返るか

### 3.4 レシピ保存機能

- [ ] 生成したレシピを SQLite に保存できるか
- [ ] 保存済みレシピが一覧画面に表示されるか
- [ ] 保存済みレシピを削除できるか
- [ ] 保存済みレシピを編集できるか
- [ ] タグやお気に入りフラグを付与/解除できるか

### 3.5 レシピ表示機能

- [ ] 一覧画面で保存済みレシピを表示できるか
- [ ] 詳細画面で材料・手順・画像を正しく表示できるか
- [ ] 検索やフィルタ機能が動作するか

### 3.6 完成品イメージ生成機能

- [ ] レシピをもとに DALL·E API を使って画像を生成できるか
- [ ] 生成画像がレシピ詳細に表示されるか
- [ ] 生成画像のパスが DB に保存されるか

### 3.7 エラーハンドリング

- [ ] API キーが設定されていない場合にエラーメッセージが出るか
- [ ] ネットワークエラー時に適切なエラーを返すか
- [ ] DB 接続エラーが発生した場合に処理が中断されるか

---

## 4. テスト方法

- 単体テスト（pytest で実施）
- 結合テスト（FastAPI の TestClient で実施）
- 手動テスト（実際に画面操作を行って確認）

---

## 5. テスト環境

- **OS**: macOS / Windows いずれか
- **Python**: 3.10+
- **ライブラリ**: FastAPI, SQLModel, PIL, requests, pytest
- **外部サービス**: OpenAI API

---

## 6. テストスケジュール

- 単体テスト：実装と並行して随時
- 結合テスト：主要機能実装後
- 手動テスト：MVP 完成後

---

## 推奨保存名称

`08_test_plan.md`
