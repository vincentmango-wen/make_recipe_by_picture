# データフロー図（DFD）

## 📘 プロジェクト名

食材画像からレシピ提案アプリ

---

## 1. レベル 0（全体像）

```mermaid
flowchart TD
    U["ユーザー"] -->|画像アップロード| A["FastAPIサーバー"]
    A -->|画像解析| B["食材検出モジュール"]
    B -->|食材リスト| A
    A -->|食材リストを入力| C["OpenAI API (LLM)"]
    C -->|レシピ提案| A
    A -->|保存/取得| D[(SQLite DB)]
    A -->|完成品イメージ生成リクエスト| E["OpenAI DALL·E API"]
    E -->|生成画像URL| A
    A -->|結果表示(レシピ+画像)| U
```

---

## 2.データの流れ（詳細）

### 1. 画像アップロード

- ユーザー → FastAPI → 食材検出モジュール

### 2. 食材検出

- モジュールが画像から食材を抽出し、リストを返す

### 3. レシピ生成

- FastAPI が LLM に食材リストを渡し、レシピ提案を受け取る

### 4. 完成品イメージ生成

- レシピを基に DALL·E API に依頼し、画像を生成して返す

### 5. 保存処理

- 提案されたレシピや生成画像のパスを SQLite DB に保存

### 6. 表示処理

- 食材リスト、レシピ、完成品画像をユーザーに表示
