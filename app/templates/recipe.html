{% extends "base.html" %} {% block title %}レシピ提案{% endblock %} {% block
content %}
<h2 class="mb-3">おすすめレシピ</h2>

<h4>食材</h4>
<ul class="list-group mb-3">
  {% for ing in ingredients %}
  <li class="list-group-item">{{ ing }}</li>
  {% endfor %}
</ul>

<h4>レシピ</h4>
<div class="card mb-3">
  <div class="card-body">
    <pre class="mb-0">{{ recipe }}</pre>
  </div>
</div>

{% if image_url %}
<h4>完成品イメージ</h4>
<img
  src="{{ image_url }}"
  alt="料理画像"
  class="img-fluid rounded shadow mb-3"
  width="400"
/>
{% endif %}

<!-- 保存ボタン -->
<form action="/save_recipe_ui" method="post">
  <input
    type="hidden"
    name="title"
    value="{{ recipe.splitlines()[0].replace('料理名:','').strip() }}"
  />
  <input type="hidden" name="steps" value="{{ recipe }}" />
  <input type="hidden" name="ingredients" value="{{ ','.join(ingredients) }}" />
  <input type="hidden" name="image_url" value="{{ image_url }}" />
  <!-- タグ選択（チェックボックス） -->
  <div class="mb-3">
    <label class="form-label">タグを選択</label><br />
    {% for tag in tags %}
    <div class="form-check form-check-inline">
      <input
        class="form-check-input"
        type="checkbox"
        name="tags"
        value="{{ tag.name }}"
      />
      <label class="form-check-label">{{ tag.name }}</label>
    </div>
    {% endfor %}
  </div>
  <button type="submit" class="btn btn-success">📌 保存する</button>
</form>

<a href="/" class="btn btn-secondary mt-3">← 戻る</a>
{% endblock %}
